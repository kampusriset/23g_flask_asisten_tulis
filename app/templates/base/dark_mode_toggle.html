<!-- Dark Mode Toggle Switch (Top Right Corner) - Sliding Box Style -->
<style>
    .dark-toggle-wrapper {
        position: fixed;
        top: 1.5rem;
        right: 1.5rem;
        z-index: 50;
    }

    .dark-toggle input {
        display: none;
    }

    .dark-toggle .track {
        position: relative;
        width: 56px;
        height: 30px;
        background: linear-gradient(135deg, #e5e7eb, #d1d5db);
        border-radius: 9999px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 7px;
        transition: background 0.3s ease;
    }

    html.dark .dark-toggle .track {
        background: linear-gradient(135deg, #1f2933, #111827);
    }

    /* ICON */
    .dark-toggle .icon {
        font-size: 14px;
        z-index: 3;
        /* ðŸ”¥ di atas thumb */
        transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .dark-toggle .moon {
        opacity: 1;
    }

    .dark-toggle .sun {
        opacity: 0.4;
    }

    /* THUMB */
    .dark-toggle .thumb {
        position: absolute;
        top: 3px;
        left: 3px;
        width: 24px;
        height: 24px;
        background: white;
        border-radius: 50%;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        z-index: 1;
        /* ðŸ”¥ di bawah icon */
        transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* CHECKED STATE */
    .dark-toggle input:checked+.track .thumb {
        transform: translateX(26px);
    }

    .dark-toggle input:checked+.track .sun {
        opacity: 1;
    }

    .dark-toggle input:checked+.track .moon {
        opacity: 0.4;
    }
</style>

<div class="dark-toggle-wrapper">
    <label class="dark-toggle">
        <input type="checkbox" id="darkModeToggle" {% if dark_mode %}checked{% endif %}>
        <span class="track">
            <span class="icon moon"></span>
            <span class="icon sun"></span>
            <span class="thumb"></span>
        </span>
    </label>
</div>


<script>
    document.getElementById("darkModeToggle").addEventListener("change", () => {
        fetch("/setting/toggle-dark", { method: "POST" })
            .then(() => {
                location.reload();
            });
    });
</script>